# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Options Analysis Toolkit — calculates implied volatility using Black-Scholes with Brent's method.

## Commands

```bash
# Install dependencies
pip install scipy

# IV calculator - interactive mode
python scripts/options_vol_calculator.py

# IV calculator - CLI mode (supports up to 3 prices)
python scripts/options_vol_calculator.py TICKER EXP_DATE STRIKE call/put VAL_DATE PRICE_A [PRICE_B] [PRICE_C]
# Example: python scripts/options_vol_calculator.py AAPL 3/31/2026 300 call 1/31/2026 10 20
```

No test suite, linter, or build step exists. Scripts are run directly.

## Architecture

- **`scripts/options_vol_calculator.py`** — IV calculator with two modes (interactive and CLI). Uses `scipy.optimize.brentq` for solving and the Yahoo Finance chart API (`query1.finance.yahoo.com`) as a lightweight price source. Supports dividend yield in Black-Scholes pricing.
- **`.claude/skills/iv/SKILL.md`** — `/iv` slash command: directly invokes `options_vol_calculator.py` CLI.

Skills live under `.claude/skills/` in the repo. The session-start hook copies them to `~/.claude/skills/<name>/SKILL.md` automatically at session start. Don't use symlinks.

## Dependencies

`scipy` (Brent's method + normal distribution for Black-Scholes).

## Code Conventions

- Descriptive variable names
- Console section headers with `===` formatting
- Use `.get()` with fallback values on dict keys from API responses
- f-strings for formatting
- Handle potential `None` values from Yahoo Finance API responses

## Git Workflow

- **Always run `git pull` at the start of every session** before doing any work
- Branch naming: `claude/<description>-<session-id>`
- Push to feature branches, not directly to main

## Notes

- Network access to Yahoo Finance required
- Data freshness varies with market hours; rate limiting possible
- The Yahoo Finance chart API (`query1.finance.yahoo.com`) is used for fetching current price only
